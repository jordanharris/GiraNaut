$(function(){function a(a){var b=$("<div class='touristChatBox' data-id="+guideData._id+"></div>");$("#touristChat").append(b),b.html(e(a))}function b(a){a.timestamp=moment(a.timestamp).format("MMM D, h:mm a"),$(".chatWindow[data-id="+a.from+"]").find(".chat").append(g(a))}function c(a){a.timestamp=moment(a.timestamp).format("MMM D, h:mm a"),$(".chatWindow[data-id="+a.from+"]").find(".chat").append(i(a))}var d=$("#touristChatMessenger").html(),e=Handlebars.compile(d),f=$("#incomingMessage").html(),g=Handlebars.compile(f),h=$("#outgoingMessage").html(),i=Handlebars.compile(h),j=$("#chatInbox").html(),k=Handlebars.compile(j);$.backstretch("/images/brazilLandscape.jpg"),$("#main_icon").click(function(a){a.preventDefault(),$("#wrapper").toggleClass("active")}),$("#enable").on("click",function(){$(this).text("Edit Profile"===$(this).text()?"Disable Edit":"Edit Profile")}),$(document).on("click",".messageQueueDesign",function(){$(this).removeClass("newMessage")});var l=io.connect("http://premarchmadness.herokuapp.com/");l.on("connect",function(){}),l.on("message",function(c){$(".chatSidebar[data-id="+c.from+"]").length<1?($("#messageQueue").prepend(k({name:c.name,message:c.message,from:c.from,image:c.image})),a(c),b(c),$(".chatWindow[data-id="+c.from+"]").closest(".touristChatBox").hide()):($("#messageQueue").prepend($(".chatSidebar[data-id="+c.from+"]").closest(".messageQueueDesign").addClass("newMessage")),b(c),$(".chatWindow[data-id="+c.from+"]").find(".chatBody").scrollTop($(".chatWindow[data-id="+c.from+"]").find(".chat").height()))}),$(document).on("click",".chatName",function(){$(".chatName").length>1&&$(".touristChatBox").hide(),$("#wrapper").toggleClass("active"),$(".cover").hide();var a=$(this).attr("data-id");$(".chatWindow[data-id="+a+"]").closest(".touristChatBox").css("display","block"),$(".chatWindow[data-id="+a+"]").find(".chatBody").scrollTop($(".chatWindow[data-id="+a+"]").find(".chat").height())}),$(document).on("click",".removeButton",function(){$(".cover").show(),$(this).closest(".touristChatBox").hide()}),$(document).on("keyup",".messageBox",function(a){if(13===a.keyCode){var b=$(this).closest(".chatWindow").attr("data-id"),c=$(this).val(),d=moment().format("MMM D, h:mm a YYYY");l.emit("message",{message:c,timestamp:d,name:guideData.firstName,from:guideData._id,image:guideData.picture,to:b}),$(this).closest(".chatWindow").find(".chat").append(i({timestamp:moment(d).format("MMM D, h:mm a"),name:guideData.firstName,message:c,from:guideData._id,image:guideData.picture})),$(this).closest(".chatBody").scrollTop($(this).closest("chatBody").find(".chat").height()),c=$(this).val("")}}),$(document).on("click",".btn-chat",function(){var a=$(this).closest(".chatWindow").attr("data-id"),b=$(this).closest(".chatWindow").find(".messageBox").val(),c=moment().format("MMM D, h:mm a YYYY");l.emit("message",{message:b,timestamp:c,name:guideData.firstName,from:guideData._id,image:guideData.picture,to:a}),$(this).closest(".chatWindow").find(".chat").append(i({timestamp:moment(c).format("MMM D, h:mm a"),name:guideData.firstName,message:b,from:guideData._id,image:guideData.picture})),$(this).closest(".chatBody").scrollTop($(this).closest(".chatBody").find(".chat").height()),b=$(this).closest(".input-group").find(".messageBox").val("")});var m=messageData.filter(function(a){return a});m.sort(function(a,b){return a.date>b.date?1:a.date<b.date?-1:0});for(var n=0;n<m.length;n++)m[n].from._id!==guideData._id?$(".chatSidebar[data-id="+m[n].from._id+"]").length<1?($("#messageQueue").prepend(k({from:m[n].from._id,name:m[n].from.name,image:m[n].from.picture})),a({name:m[n].from.name,from:m[n].from._id}),b({name:m[n].from.firstName,from:m[n].from._id,image:m[n].from.picture,message:m[n].message,timestamp:m[n].time}),$(".chatWindow[data-id="+m[n].from._id+"]").closest(".touristChatBox").hide()):($("#messageQueue").prepend($(".chatSidebar[data-id="+m[n].from._id+"]").closest(".messageQueueDesign")),b({name:m[n].from.firstName,from:m[n].from._id,image:m[n].from.picture,message:m[n].message,timestamp:m[n].time}),$(".chatWindow[data-id="+m[n].from._id+"]").find(".chatBody").scrollTop($(".chatWindow[data-id="+m[n].from._id+"]").find(".chat").height())):$(".chatSidebar[data-id="+m[n].to._id+"]").length<1?($("#messageQueue").prepend(k({from:m[n].to_id,name:m[n].to.name,image:m[n].to.picture})),a({name:m[n].to.name,from:m[n].to._id}),c({name:m[n].from.firstName,from:m[n].to._id,image:m[n].from.picture,message:m[n].message,timestamp:m[n].time}),$(".chatWindow[data-id="+m[n].to._id+"]").closest(".touristChatBox").hide()):($("#messageQueue").prepend($(".chatSidebar[data-id="+m[n].to._id+"]").closest(".messageQueueDesign")),c({name:m[n].from.firstName,from:m[n].to._id,image:m[n].from.picture,message:m[n].message,timestamp:m[n].time}),$(".chatWindow[data-id="+m[n].to._id+"]").find(".chatBody").scrollTop($(".chatWindow[data-id="+m[n].to._id+"]").find(".chat").height()))});
//# sourceMappingURL=guidesHome.min.map